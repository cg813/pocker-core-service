{% extends 'admin/change_list.html' %}
{% block object-tools %}
<button id="GetGame" class="button" onClick="updateGames()">Get Mascot Games</button>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"
    integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    let canFetch = true
    function updateGames() {
        if (canFetch) {
            canFetch = false;
            let button = document.getElementById('GetGame');
            button.innerHTML = "Fetching Games... Please waite";
            axios.get('/api/mascot/all_games/').then(response => {
                console.log(response)
                if (response.data.success) {
                    window.location.reload();
                }
            })
        }

    }
</script>
{% endblock object-tools %}